<view class="container"><view class="tui-header-box"><view class="tui-header" style="{{'width:'+(width+'px')+';'+('height:'+(height+'px')+';')}}"><view data-event-opts="{{[['tap',[['back',['$event']]]]]}}" class="tui-back" style="{{'margin-top:'+(arrowTop+'px')+';'}}" bindtap="__e"><tui-icon vue-id="7cfa8b9b-1" name="arrowleft" color="#000" bind:__l="__l"></tui-icon></view><view data-event-opts="{{[['tap',[['search',['$event']]]]]}}" class="tui-searchbox tui-search-mr" style="{{'margin-top:'+(inputTop+'px')+';'}}" bindtap="__e"><icon type="search" size="{{13}}" color="#999"></icon><block wx:if="{{!searchKey}}"><text class="tui-search-text">搜索商品</text></block><block wx:if="{{searchKey}}"><view class="tui-search-key"><view class="tui-key-text">{{searchKey}}</view><tui-icon vue-id="7cfa8b9b-2" name="shut" size="{{12}}" color="#fff" bind:__l="__l"></tui-icon></view></block></view></view></view><view class="tui-header-screen" style="{{'top:'+(height+'px')+';'}}"><view class="tui-screen-top"><view class="{{['tui-top-item tui-icon-ml',tabIndex==0?'tui-active tui-bold':'']}}" data-index="0" data-event-opts="{{[['tap',[['screen',['$event']]]]]}}" bindtap="__e"><view>{{selectedName}}</view><tui-icon vue-id="7cfa8b9b-3" name="{{selectH>0?'arrowup':'arrowdown'}}" size="{{14}}" color="{{tabIndex==0?'#e41f19':'#444'}}" tui-icon-class="tui-ml" bind:__l="__l"></tui-icon></view><view class="{{['tui-top-item',tabIndex==1?'tui-active tui-bold':'']}}" data-index="1" data-event-opts="{{[['tap',[['screen',['$event']]]]]}}" bindtap="__e">销量</view><view class="tui-top-item" data-index="2" data-event-opts="{{[['tap',[['screen',['$event']]]]]}}" bindtap="__e"><tui-icon vue-id="7cfa8b9b-4" name="{{isList?'manage':'listview'}}" size="{{isList?22:18}}" bold="{{isList?false:true}}" color="#333" bind:__l="__l"></tui-icon></view><view class="tui-top-item tui-icon-ml" data-index="3" data-event-opts="{{[['tap',[['screen',['$event']]]]]}}" bindtap="__e"><text>筛选</text><tui-icon vue-id="7cfa8b9b-5" name="screen" size="{{12}}" color="#333" tui-icon-class="tui-ml" bold="{{true}}" bind:__l="__l"></tui-icon></view><view class="{{['tui-dropdownlist',selectH>0?'tui-dropdownlist-show':'']}}" style="{{'height:'+(selectH+'rpx')+';'}}"><block wx:for="{{dropdownList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['tui-dropdownlist-item tui-icon-middle',item.selected?'tui-bold':'']}}" data-index="{{index}}" data-event-opts="{{[['tap',[['dropdownItem',['$event']]]]]}}" catchtap="__e"><text class="tui-ml tui-middle">{{item.name}}</text><block wx:if="{{item.selected}}"><tui-icon vue-id="{{'7cfa8b9b-6-'+index}}" name="check" size="{{16}}" color="#e41f19" bold="{{true}}" tui-icon-class="tui-middle" bind:__l="__l"></tui-icon></block></view></block></view><view data-event-opts="{{[['tap',[['hideDropdownList',['$event']]]]]}}" class="{{['tui-dropdownlist-mask',selectH>0?'tui-mask-show':'']}}" catchtap="__e"></view></view></view><view class="tui-product-list" style="margin-top:125px;"><view class="tui-product-container"><block wx:for="{{productList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block><view class="{{['tui-pro-item',isList?'tui-flex-list':'']}}" hover-class="hover" hover-start-time="{{150}}" data-event-opts="{{[['tap',[['detail',['$0'],[[['productList','',index,'id']]]]]]]}}" bindtap="__e"><image class="{{['tui-pro-img',isList?'tui-proimg-list':'']}}" src="{{item.image}}"></image><view class="tui-pro-content"><view class="tui-pro-tit">{{item.store_name}}</view><view><view class="tui-pro-price"><block wx:if="{{item.vip_price!=undefined}}"><text class="tui-sale-price">{{"￥"+item.vip_price}}</text></block><block wx:else><text class="tui-sale-price">{{"￥"+item.price}}</text></block><text class="tui-factory-price">{{"￥"+item.ot_price}}</text></view><block wx:if="{{item.sales==0}}"><block><view class="tui-pro-pay">0人付款</view></block></block><block wx:else><block><view class="tui-pro-pay">{{item.sales+"人付款"}}</view></block></block></view></view></view></block></block></view></view><tui-top-dropdown vue-id="7cfa8b9b-7" bgcolor="#f7f7f7" show="{{dropScreenShow}}" paddingbtm="{{110}}" translatey="{{dropScreenH}}" data-event-opts="{{[['^close',[['btnCloseDrop']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view class="tui-scroll-box" scroll-y="{{true}}" scroll-top="{{scrollTop}}"><view class="tui-seizeaseat-20"></view><block wx:for="{{attrData}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['tui-drop-item tui-icon-middle',item.selected?'tui-bold':'']}}" data-index="{{index}}" data-event-opts="{{[['tap',[['btnSelected',['$event']]]]]}}" catchtap="__e"><block wx:if="{{item.selected}}"><tui-icon vue-id="{{('7cfa8b9b-8-'+index)+','+('7cfa8b9b-7')}}" name="check" size="{{16}}" color="#e41f19" bold="{{true}}" tui-icon-class="tui-middle" bind:__l="__l"></tui-icon></block><text class="tui-ml tui-middle">{{item.name}}</text></view></block><view class="tui-seizeaseat-30"></view></scroll-view><view class="tui-drop-btnbox"><view class="tui-drop-btn tui-btn-white" hover-class="tui-white-hover" hover-stay-time="{{150}}" data-event-opts="{{[['tap',[['reset',['$event']]]]]}}" bindtap="__e">重置</view><view class="tui-drop-btn tui-btn-red" hover-class="tui-red-hover" hover-stay-time="{{150}}" data-event-opts="{{[['tap',[['btnSure',['$event']]]]]}}" bindtap="__e">确定</view></view></tui-top-dropdown><tui-drawer vue-id="7cfa8b9b-9" mode="right" visible="{{drawer}}" data-event-opts="{{[['^close',[['closeDrawer']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="tui-drawer-box" style="{{'padding-top:'+(height+'px')+';'}}"><scroll-view class="tui-drawer-scroll" style="{{'height:'+(drawerH+'px')+';'}}" scroll-y="{{true}}"><view class="tui-drawer-title"><text class="tui-title-bold">分类</text></view><view class="tui-drawer-content tui-flex-attr"><view data-event-opts="{{[['tap',[['set_all',['$event']]]]]}}" class="{{['tui-attr-item',currentId==0?'tui-btmItem-active':'']}}" bindtap="__e"><view class="tui-attr-ellipsis">全部</view></view><block wx:for="{{flist}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block><view data-event-opts="{{[['tap',[['tabtap',['$0'],[[['flist','',index]]]]]]]}}" class="{{['tui-attr-item',currentId==item.category_id?'tui-btmItem-active':'']}}" bindtap="__e"><view class="tui-attr-ellipsis">{{item.category_name}}</view></view></block></block></view><block wx:if="{{currentId>0}}"><block><view class="tui-drawer-title"><text class="tui-title-bold">子类</text></view><view class="tui-drawer-content tui-flex-attr"><block wx:for="{{slist}}" wx:for-item="sitem" wx:for-index="index" wx:key="index"><block wx:if="{{sitem.pid==currentId}}"><block><view data-event-opts="{{[['tap',[['tab_children',['$0'],[[['slist','',index,'category_id']]]]]]]}}" class="{{['tui-attr-item',sitem.category_id==current_children_id?'tui-btmItem-active':'']}}" bindtap="__e"><view class="tui-attr-ellipsis">{{sitem.category_name}}</view></view></block></block></block></view></block></block><view class="tui-safearea-bottom"></view></scroll-view><view class="tui-attr-btnbox"><view class="tui-attr-safearea"><view class="tui-drawer-btn tui-drawerbtn-black" hover-class="tui-white-hover" hover-stay-time="{{150}}" data-event-opts="{{[['tap',[['reset_choose',['$event']]]]]}}" bindtap="__e">重置</view><view class="tui-drawer-btn tui-drawerbtn-primary" hover-class="tui-red-hover" hover-stay-time="{{150}}" data-event-opts="{{[['tap',[['closeDrawer',['$event']]]]]}}" bindtap="__e">确定</view></view></view></view></tui-drawer><tui-loadmore vue-id="7cfa8b9b-10" visible="{{loadding}}" index="{{3}}" type="red" bind:__l="__l"></tui-loadmore><tui-nomore vue-id="7cfa8b9b-11" visible="{{!pullUpOn}}" bgcolor="#f7f7f7" bind:__l="__l"></tui-nomore></view>