(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/myorder/grade/grade"],{1130:function(e,t,n){"use strict";n.r(t);var o=n("5fdf"),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},"44c1":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var r=function(){var e=this,t=e.$createElement;e._self._c},a=[]},"5fdf":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o,r,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(o,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function u(e){a(i,o,r,u,c,"next",e)}function c(e){a(i,o,r,u,c,"throw",e)}u(void 0)}))}}var u=function(){n.e("components/uni/uni-rate/uni-rate").then(function(){return resolve(n("9b95"))}.bind(null,n)).catch(n.oe)},c={data:function(){return{imgList:[],order:"",order_id:"",getimg:this.$getimg,form:[],grade_list:"",ImgBox:[]}},components:{uniRate:u},onLoad:function(){var t=e.getStorageSync("grade_pro");this.order=t.data,this.order_id=t.id,this.creat_obj()},onShow:function(){console.log("触发了onshow")},methods:{creat_obj:function(){var e=this.order.length;console.log(e);for(var t=[],n=[],o={goods_id:"",content:"",imgs:[],rate:""},r=0;r<e;r++)t[r]=o,n[r]=[];this.grade_list=t,this.ImgBox=n,console.log("ImgBox:",this.ImgBox)},sub_grade:function(){var t=this;return i(o.default.mark((function n(){var r,a,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.showLoading({title:"提交中"}),e.hideLoading(),n.t0=o.default.keys(t.order);case 3:if((n.t1=n.t0()).done){n.next=13;break}return r=n.t1.value,a=t.order[r],n.next=8,t.uploads(r);case 8:t.grade_list[r].content=a.content,t.grade_list[r].goods_id=a.goods_id,t.grade_list[r].rate=a.rate,n.next=3;break;case 13:return i={id:t.order_id,json:t.grade_list},console.log(i),n.abrupt("return");case 17:case"end":return n.stop()}}),n)})))()},uploads:function(e){var t=this;return i(o.default.mark((function n(){var r,a,i,u;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t,a=[],console.log(r.ImgBox[e]),n.t0=o.default.keys(r.ImgBox[e]);case 4:if((n.t1=n.t0()).done){n.next=12;break}return i=n.t1.value,u=r.ImgBox[e][i],n.next=9,r.up_img(u);case 9:a[i]=n.sent,n.next=4;break;case 12:console.log("img:",a),t.grade_list[e].imgs.push(a);case 14:case"end":return n.stop()}}),n)})))()},up_img:function(t){return new Promise((function(n,o){e.uploadFile({url:"https://cy.qxnjssc.com/v1/up_img",filePath:t,name:"img",header:{token:e.getStorageSync("token")},formData:{user:"test"},success:function(e){n(e.data)}})}))},ChooseImage:function(t){var n=this;e.chooseImage({count:20,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var o=n.ImgBox[t].length;0!=o?(console.log("add",e.tempFilePaths),n.ImgBox[t].splice(o-1,0,e.tempFilePaths)):(console.log("create",e.tempFilePaths),n.$set(n.ImgBox,t,e.tempFilePaths)),console.log(n.ImgBox)}})},ViewImage:function(t,n){var o=this,r=o.ImgBox[n];console.log(r,n),e.previewImage({urls:r,current:t.currentTarget.dataset.url})},DelImg:function(t,n){var o=this;console.log("del:",t.currentTarget.dataset.index,n),e.showModal({title:"删除",content:"确定要删除吗？",cancelText:"否",confirmText:"是",success:function(e){e.confirm&&o.ImgBox[n].splice(t.currentTarget.dataset.index,1)}})},get_rate:function(e){console.log(e),this.order[e.index]["rate"]=e.value}}};t.default=c}).call(this,n("543d")["default"])},a920:function(e,t,n){"use strict";(function(e){n("f238");o(n("66fd"));var t=o(n("fa90"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},b678:function(e,t,n){"use strict";var o=n("dfd6"),r=n.n(o);r.a},dfd6:function(e,t,n){},fa90:function(e,t,n){"use strict";n.r(t);var o=n("44c1"),r=n("1130");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("b678");var i,u=n("f0c5"),c=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=c.exports}},[["a920","common/runtime","common/vendor"]]]);